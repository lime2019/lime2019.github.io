(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{622:function(s,a,e){"use strict";e.r(a);var t=e(2),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"bash介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bash介绍"}},[s._v("#")]),s._v(" Bash介绍")]),s._v(" "),e("blockquote",[e("p",[s._v("Bash（GNU Bourne-Again Shell）是一个为GNU计划编写的Unix shell。")])]),s._v(" "),e("p",[s._v("shell是一个命令解释器，是介于操作系统内核与用户之间的一个绝缘层。准确地说，它也是能力很强的计算机语言，被称为解释性语言或"),e("strong",[s._v("脚本语言")]),s._v("。它可以通过将系统调用、公共程序、工具和编译过的二进制程序”粘合“在一起来建立应用，这是大多数脚本语言的共同特征，所以有时候脚本语言又叫做“胶水语言”。")]),s._v(" "),e("p",[s._v("所有的UNIX命令和工具再加上公共程序，对于shell脚本来说，都是可调用的。")]),s._v(" "),e("h2",{attrs:{id:"简单使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#简单使用"}},[s._v("#")]),s._v(" 简单使用")]),s._v(" "),e("p",[s._v("例如，一个输出"),e("code",[s._v("Hello World")]),s._v("的shell程序。")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#! /bin/bash")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This is a comment")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" Hello World\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[e("code",[s._v("#!")]),s._v(" 是说明 hello 这个文件的类型，所以第一行中代码表示该文件为一个BASH程序，需要"),e("code",[s._v("/bin")]),s._v("下的Bash程序来解释执行。")]),s._v(" "),e("p",[e("code",[s._v("#")]),s._v("是程序的注释。")]),s._v(" "),e("p",[e("code",[s._v("echo")]),s._v("语句是把"),e("code",[s._v("echo")]),s._v("后面的字符串输出到标准输出中。")]),s._v(" "),e("p",[s._v("Bash中绝大多数语句结尾都"),e("strong",[s._v("没有分号")]),s._v("。")]),s._v(" "),e("p",[s._v("查找bash所在位置："),e("code",[s._v("locate bash")]),s._v("、"),e("code",[s._v("find / -name bash 2>/dev/null")]),s._v("、"),e("code",[s._v("whereis bash")])]),s._v(" "),e("h2",{attrs:{id:"运行shell脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行shell脚本"}},[s._v("#")]),s._v(" 运行Shell脚本")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用shell来执行")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" hello.sh\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用bash来执行")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" hello.sh\n使用.来执行\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" ./hello.sh\n使用source来执行\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" hello.sh\n还可以赋予脚本所有者执行权限，允许该用户执行该脚本\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" u+rx hello.sh\n./hello.sh\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("h3",{attrs:{id:"重定向"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重定向"}},[s._v("#")]),s._v(" 重定向")]),s._v(" "),e("blockquote",[e("p",[e("code",[s._v(">")]),s._v("符号是重定向，执行以下代码，即会在当前目录下创建一个"),e("code",[s._v("my.txt")]),s._v("。")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#! /bin/bash")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello World"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" my.txt\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"清理文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#清理文件"}},[s._v("#")]),s._v(" 清理文件")]),s._v(" "),e("p",[e("code",[s._v("/var/log/wtmp")]),s._v("中记录了系统的一些信息。")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 初始化一个变量")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LOG_DIR")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/log\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$LOG_DIR")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /dev/null "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" wtmp\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Logs cleaned up."')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("运行脚本前，先使用"),e("code",[s._v("sudo chmod +x cleanlogs.sh")]),s._v(" 授予脚本执行权限。")]),s._v(" "),e("p",[s._v("由于脚本中含有对系统日志文件内容的清除操作，必须要管理员权限，否则会出现"),e("code",[s._v("permission denied")]),s._v("错误。使用sudo命令调用管理员权限才能执行成功："),e("code",[s._v("sudo ./cleanlogs.sh")])]),s._v(" "),e("p",[s._v("第一行"),e("code",[s._v("#! /bin/bash")]),s._v("这一行是表示使用"),e("code",[s._v("/bin/bash")]),s._v("作为脚本的解释器。")]),s._v(" "),e("h2",{attrs:{id:"权限"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#权限"}},[s._v("#")]),s._v(" 权限")]),s._v(" "),e("p",[e("code",[s._v("sudo cat /dev/null > /var/log/wtmp")]),s._v("这一条命令中，"),e("code",[s._v("sudo")]),s._v("只能让"),e("code",[s._v("cat")]),s._v("命令以"),e("code",[s._v("sudo")]),s._v("权限执行，但是"),e("code",[s._v(">")]),s._v("符号没有"),e("code",[s._v("sudo")]),s._v("权限。")]),s._v(" "),e("p",[s._v("可以使用"),e("code",[s._v('sudo sh -c "cat /dev/null > /var/log/wtmp "')]),s._v("来让整条命令都具有"),e("code",[s._v("sudo")]),s._v("权限。")])])}),[],!1,null,null,null);a.default=n.exports}}]);